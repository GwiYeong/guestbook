<?xml version= "1.0" encoding ="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.nhnent.guestbook.dao.GuestbookDao"> 

	<resultMap type="com.nhnent.guestbook.vo.Guestbook" id="GuestbookResultMap">
		<result property="number" column="number"/>
		<result property="email" column="email" />
		<result property="password" column="password" />
		<result property="content" column="content" />
		<result property="registTime" column="registtime" />
		<result property="updateTime" column="updatetime" />
	</resultMap>
	
	<insert id="insertGuestbook" parameterType="com.nhnent.guestbook.vo.Guestbook">
	INSERT INTO 
		guestbook (email, [password], content, registtime, updatetime) 
	VALUES (#{email}, #{password}, #{content}, NOW(), NULL);
	</insert>
	
	<select id="selectAllGuestbook" resultMap="GuestbookResultMap">
	SELECT
		number,
		email,
		[password],
		content,
		registtime,
		updatetime
	FROM
		guestbook
	ORDER BY number DESC;
	</select>
	
	<select id="selectPasswordByNumber" parameterType = "java.lang.String" resultType="java.lang.String">
	SELECT 
		[password]
	FROM
		guestbook
	WHERE number = #{number};
	
	</select>
	
	<update id="updateGuestbook" parameterType = "com.nhnent.guestbook.vo.Guestbook">
	UPDATE
		guestbook
	SET
		content = #{content},
		updatetime = NOW()
	WHERE
		number = #{number};
	</update>
</mapper>